(function(){define("project/answer",["jquery"],function(e){var t;return t=function(){function t(){e(document).on("change","[data-star-range]",function(){return e(this).attr("data-star-range",e(this).val())})}return t}()})}).call(this),function(){define("project/calendar",["jquery","noty","fullcalendar"],function(e){var t;return t=function(){function t(){var t;t=this,this._$modal=e("#slotSelectionModalContainer"),this._$calendar=e("#calendar"),this._$loading=e("#loading"),this.calendar=this._$calendar.fullCalendar({header:{left:"",center:"title",right:"today prev next"},axisFormat:"h:mm a",defaultDate:moment().add(1,"d"),defaultView:"agendaWeek",firstDay:1,allDaySlot:!1,slotEventOverlap:!1,selectable:!1,selectHelper:!0,slotDuration:"00:30:00",snapDuration:"00:15:00",eventClick:function(e){return function(e){var n;return n=e.ids.split(",").map(function(e){return e>>0}),t._populateModal(n,e),t._$modal.modal("show")}}(this),loading:function(e){return function(t){e._isLoading=t;if(e._isLoading)return e._intervalHandler=clearInterval(e._intervalHandler),e._timeOutHandler=setTimeout(function(){return e._loadingEnable=!0,e._$loading.show(),e._intervalHandler=setInterval(function(){if(!e._isLoading)return e._$loading.fadeOut(),e._loadingEnable=!1,e._intervalHandler=clearInterval(e._intervalHandler)},1e3)},100);if(!e._loadingEnable)return clearTimeout(e._timeOutHandler)}}(this),events:function(n,r,i,s){var o;return o={start:n.format(),end:r.format()},e.getJSON(t._$calendar.data("index-url"),o,function(e){return s(e)})}}),this._bind()}return t.prototype._bind=function(){return this._$modal.on("hidden.bs.modal",".btn-primary",function(){return e(this).off(".modal")}),this._$modal.on("click.modal",".btn-primary",this._sendSelectedSession.bind(this))},t.prototype._sendSelectedSession=function(){var t,n,r,i;return t=this._$modal.find(".modal-body select"),r=t.val()>>0,n=t.data("ids").split(",").slice(r,r+this._$calendar.data("duration")).join(","),i=this._$calendar.data("update-url").replace(":ids",n),e.ajax({url:i,type:"post",dataType:"json",data:{start:this._$calendar.fullCalendar("getView").start.format(),end:this._$calendar.fullCalendar("getView").end.format(),_method:"put"},success:function(e){return function(t){if(t.status===200)return document.location=e._$calendar.data("reload-url")}}(this),complete:this._showNotification})},t.prototype._populateModal=function(t,n){var r,i,s,o,u,a,f;u=moment(n._start),o=this._$calendar.data("duration"),a=15,r=this._$modal.find(".modal-body select"),r.empty(),s=t.length-o;for(i=f=0;0<=s?f<=s:f>=s;i=0<=s?++f:--f)r.append(e('<option value="'+i+'"> From '+n._start.format("LT")+" to "+n._start.add(a*o,"m").format("LT")+" </option>")),n._start.subtract((o-1)*a,"m");return n._start=u,r.data("ids",t.join(","))},t.prototype._showNotification=function(e){return e=e.responseJSON,noty({layout:"topRight",type:e.status===200?"success":"error",text:e.message,timeout:4e3})},t}(),t.isCalendar=function(){return e("#calendar").length},t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("project/scales",["jquery","rangeslider"],function(t){var n;return n=function(){function n(){this._onSkillIdChange=e(this._onSkillIdChange,this),this._onQuestionKindChange=e(this._onQuestionKindChange,this),this._sliderSlt='input[type="range"]',this._skillSummaryCtnSlt=".skillSummary",this._typeInputInputSlt="[data-skill-type]",this._questionKindInputSlt="[data-question-kind]",this._addSkillStl="[data-association='questions_skills'].add_nested_fields",this._getSummarySkills(),this._createSliders(),this._bind(),t(""+this._sliderSlt).parents(".form-group").show(),this._updateLimits(),this._updateSummary()}return n.prototype._createSliders=function(){var e;return e=this,t(""+this._sliderSlt).not(".slided").each(function(e){return function(n,r){var i,s;return i=t(r),s=i.data("kind"),i.attr("max",s==="standard"?100:25),i.rangeslider({polyfill:!1,onSlide:function(){return e._checkLimit.apply(e,t.merge(arguments,this.$element))},onSlideEnd:function(){return e._updateLimits(),e._updateSummary()}}),i.addClass("slided")}}(this))},n.prototype._bind=function(){return t(document).on("change",this._questionKindInputSlt,this._onQuestionKindChange),t(document).on("change",this._typeInputInputSlt,this._onSkillIdChange),t(document).on("nested:fieldRemoved",function(e){return function(){return e._updateLimits(),e._updateSummary()}}(this)),t(document).on("nested:fieldAdded:questions",function(e){return function(t){return t.field.find(""+e._questionKindInputSlt).change()}}(this)),t(document).on("nested:fieldAdded:questions_skills",function(e){return function(){var n,r;return n=t(""+e._sliderSlt).not(".slided"),r=n.parents(".fields:eq(1)").find(""+e._questionKindInputSlt).val(),n.data("kind",r),e._createSliders(),n.parents(".fields:eq(0)").find("[data-skill-type]").change()}}(this))},n.prototype._onQuestionKindChange=function(e){var n,r,i;return i=t(e.currentTarget),r=i.parents(".fields").first(),n=r.find(""+this._sliderSlt),n.data("kind",i.val()),n.val(0),n.rangeslider("destroy").removeClass("slided"),this._createSliders(),this._updateLimits(),this._updateSummary()},n.prototype._onSkillIdChange=function(e){var n,r,i,s;return n=t(e.currentTarget),s=n.val(),i=n.parents(".form-group").next(),r=i.find(""+this._sliderSlt),s?(i.fadeIn("slow"),r.attr("data-slider-id",s)):i.fadeOut("slow"),r.val(0),this._updateLimits(),s&&r.val(r.data("slider-limit")).change(),this._updateLimits(),this._updateSummary()},n.prototype._checkLimit=function(e,n,r){var i,s;s=t(r).data("kind")==="malus"?"-":"",t(r).next().find(".rangeslider__handle").html(""+s+n),i=t(r).data("slider-limit");if(n>i)return t(r).val(i).change()},n.prototype._updateLimits=function(){var e;return e=this._getUniqSliders(),e.each(function(e){return function(n,r){var i,s,o,u,a,f;return s=t(r).attr("data-slider-id"),o=t(r).data("kind"),a=t(r).attr("max")>>0,f=t(r).attr("min")>>0,i=t(""+e._sliderSlt+":visible[data-slider-id="+s+"]").filter(function(e,n){return t(n).data("kind")===o}),u=a,i.each(function(e,n){return u-=t(n).val()>>0}),u<f&&(u=f),i.each(function(e,n){return t(n).data("slider-limit",u+(t(n).val()>>0))})}}(this))},n.prototype._getUniqSliders=function(){var e,n;return e=t(""+this._sliderSlt+":visible.slided"),n={standard:[],malus:[],bonus:[]},e=e.filter(function(e,r){var i,s;return i=t(r).attr("data-slider-id"),s=t(r).data("kind"),n[s].indexOf(i)===-1?(n[s].push(i),!0):!1})},n.prototype._getSummarySkills=function(){return this._summarySkills=t(""+this._skillSummaryCtnSlt+" [data-skill-id]").map(function(e,n){return{id:t(n).attr("data-skill-id"),$element:t(n)}})},n.prototype._updateSummary=function(){return this._summarySkills.each(function(e){return function(n,r){var i,s;return s={standard:0,bonus:0,malus:0},r.id!=null&&(i=t(""+e._sliderSlt+":visible[data-slider-id="+r.id+"]"),i.each(function(e,n){var r;return r=t(n).data("kind"),s[r]+=t(n).val()>>0})),r.$element.find(".standard .value").html(s.standard),r.$element.find(".bonus .value").html(s.bonus),r.$element.find(".malus .value").html("-"+s.malus)}}(this))},n}(),n.isScales=function(){return t(".skillSummary").length},n})}.call(this),function(){define("project/radios",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this,e("[data-radio-item] label").each(function(){var n;return n=this,e("#"+e(this).attr("for")).on("change",function(){return t._activate(n)}),e(this).on("click",function(){return t._activate(this)})})}return t.prototype._activate=function(t){var n;return n=e(t).parent().attr("data-radio-item"),e("[data-radio-item='"+n+"'] label").removeClass("active"),e(t).addClass("active"),e(t).attr("for")!=="scale_team_flag_ok"?e(".scale-section-answers").addClass("hidden"):e(".scale-section-answers").removeClass("hidden")},t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("project/rules",["jquery"],function(t){var n;return n=function(){function n(){this.changed=e(this.changed,this),this.url=t("[data-select-url]").data("select-url"),t(".rules_select").each(function(){if(t(this).find("option:checked").attr("value").length===0)return t(this).parents(".form-group").siblings(".params_fields").html("")}),t("form").on("change",".rules_select",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e){var n;if(t(e).find("option:checked").attr("value").length===0){t(e).parents(".form-group").siblings(".params_fields").html("");return}return n=this.url.replace(":id",t(e).find("option:checked").attr("value")),t.getJSON(n,function(n){var r,i;return i="<div class='form-group input optional project_projects_rules_rule'>",r=t(e).attr("name"),t.each(n,function(e,t){var n;return n=(new Date).getTime(),i+="<label class='select optional col-sm-2 control-label' for='project_projects_rules_attributes_params_attributes_"+n+"_rule_id'>"+t.name+"</label>",i+="<div class='col-sm-10'><input class='input optional form-control' value='"+t.default_value.replace(/(')/g,"&#39;")+"' id='project_projects_rules_attributes_params_attributes_"+n+"_value' name='"+r.replace("[rule_id]","[params_projects_rules_attributes]["+n+e+"][value]")+"' /></div>",i+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+t.id+"' name='"+r.replace("[rule_id]","[params_projects_rules_attributes]["+n+e+"][param_id]")+"' /></div>"}),t(e).parents(".form-group").siblings(".params_fields").html(i+"</div>")})},n}(),n.isRules=function(){return t("[data-select-url]").length},n})}.call(this),function(){define("project/skills",["jquery","rangeslider"],function(e){var t;return t=function(){function t(){this._$form=e("form"),this._rangeSlt='input[type="range"]:visible',this._$difficulty=e("[data-difficulty]"),this._updateLimits(),e(""+this._rangeSlt).each(function(t){return function(n,r){return t._initSlider(e(r))}}(this)),this._$difficulty.on("change",function(t){return function(){return t._updateRanges(e(""+t._rangeSlt))}}(this)),e(document).on("nested:fieldRemoved:projects_skills",function(e){return function(){return e._updateLimits()}}(this)),e(document).on("nested:fieldAdded:projects_skills",function(t){return function(){return t._updateRanges(e(""+t._rangeSlt).not(".slided"))}}(this))}return t.prototype._updateRanges=function(t){var n,r;return r=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),n=parseFloat(r),t.each(function(t){return function(r,i){var s,o,u,a;return s=e(i),a=s.attr("max"),u=n*s.val()/a,o=n/100,s.attr("max",n).attr("step",o),s.rangeslider("destroy"),s.val(u),t._initSlider(s),s.val(u)}}(this)),this._updateLimits()},t.prototype._initSlider=function(e){return e.rangeslider({polyfill:!1,onSlide:this._checkLimit,onSlideEnd:function(e){return function(){return e._updateLimits()}}(this)}),e.addClass("slided")},t.prototype._checkLimit=function(t,n){var r,i,s;s=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),i=n*100/parseFloat(s),this.$element.next().find(".rangeslider__handle").html(i),r=this.$element.data("rangeUntil");if(n>r)return this.$element.val(r).change()},t.prototype._updateLimits=function(){var t,n;return n=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),t=parseFloat(n),e(""+this._rangeSlt).each(function(n,r){return t-=parseFloat(e(r).val())}),t<0&&(t=0),e(""+this._rangeSlt).each(function(n,r){return e(r).data("rangeUntil",parseFloat(e(r).val())+t)})},t.prototype.modalCondition=function(){var t;return t=0,e(""+this._rangeSlt).each(function(n,r){return t+=e(r).next().find(".rangeslider__handle").html()>>0}),t!==100&&e("[data-difficulty]").val()!=="0"},t.prototype.modalConfirmation=function(){return this._$form.submit()},t}(),e(".skillSummary").length===0?new t:{}})}.call(this),function(){define("project/main",["require","jquery","project/answer","project/calendar","project/scales","project/radios","project/rules","project/skills"],function(e,t,n,r,i,s,o){var u;return u=function(){function e(){i.isScales()&&new i,r.isCalendar()&&new r,o.isRules()&&new o,new n,new s}return e}()})}.call(this),define("project",["project/main"],function(e){return e}),function(){define("sortable",["jquery","noty","jquery-ui/ui/sortable"],function(e){var t;return t=function(){function t(){var t;t=this,e("[data-sortable]").sortable({axis:"y",update:function(){return t.update(e(["data-update-url"]).data("update-url"),e(this).sortable("serialize"),!0)}}),e("#save_all_sorted").click(function(){var n;return n=0,e("[data-sortable]").each(function(){return n++,t.update(e(["data-update-url"]).data("update-url"),e(this).sortable("serialize"),n===1)})})}return t.prototype._update=function(t,n,r){e.post(t,n);if(r===!0)return noty({layout:"topRight",type:"success",text:"Updated",timeout:4e3})},t}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};sessionStorage.Debug=!0,require(["require","vendor"],function(e){e(["common"],function(n){return e(["jquery","project","sortable"],function(e,r,i){var s;return s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.ready=function(){return new r,new i},n}(n),new s})})})}.call(this),define("application",function(){});