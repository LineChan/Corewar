(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("Flags",["Logger","lodash"],function(t,n){var r;return r=function(){function r(){this._availableFlags=["Debug","Experiments"],this._flags=n.zipObject(this._availableFlags,n.map(this._availableFlags,function(e){return sessionStorage[e]==="true"||!1}))}return r.prototype.enable=function(n){return e.call(this._availableFlags,n)>=0?(sessionStorage[n]="true",this._flags[n]=!0,t.log(""+n+" is now enabled")):console.warn("Unable to enable "+n+" (available: ["+this._availableFlags+"])")},r.prototype.disable=function(n){return e.call(this._availableFlags,n)>=0&&(sessionStorage[n]=null,this._flags[n]=!1,t.log(""+n+" is now disabled")),t.warn("Unable to disable "+n+" (available: ["+this._availableFlags+"])")},r.prototype.get=function(e){return this._flags[e]},r}(),new r})}).call(this),function(){define("Logger",["log","Flags"],function(e,t){var n;return n=function(){function n(){if(!e)return;window.log=this.log,t.get("Debug")&&this._printHello()}return n.prototype.log=function(n,r){var i;i=['color: #000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.warn=function(n,r){var i;i=['color: #d9af16; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.err=function(n,r){var i;i=['color: #a10000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype._printHello=function(){var t;return t=["height: 60px","width: 60px","display: block",'font-size: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"background-color:transparent","padding: 30px 40px 30px 70px","line-height: 50px","background-image: url("+location.origin+"/assets/42_logo_blue-2292c8de6fa5544b186ff9e569d74cc8.png)","background-repeat: no-repeat","background-position: 0% 50%","background-size: auto 80%"],e("[c='"+t.join(";")+"']DEBUG MODE[c]")},n}(),new n})}.call(this),function(){define("common/add_on/array",[],function(){var e;return e=function(){function e(){Array.prototype.to_rails_params=function(e,t){var n;return t==null&&(t="id"),function(){var r,i,s;s=[];for(r=0,i=this.length;r<i;r++)n=this[r],s.push(""+e+"["+t.pluralize()+"][]="+n);return s}.call(this).join("&")}}return e}(),new e})}.call(this),function(){define("common/add_on/bootstrap",["jquery","bootstrap"],function(e){var t;return t=function(){function t(){e("a[rel~=popover], .has-popover").popover({trigger:"hover"}),e("a[rel~=tooltip], .has-tooltip").tooltip(),e("[data-toggle='tooltip']").tooltip()}return t}(),new t})}.call(this),function(){define("common/add_on/jquery",["common/add_on/bootstrap"],function(){var e;return e=function(){function e(){$.fn.incr=function(e,t){var n,r;e==null&&(e=1),t==null&&(t=!1);if(!$(this).length)return;return t&&(e=-e),n=$(this).html().trim(),(r=n.match(/^(\d+)\s*([\D]+)$/m))?$(this).html(r[2].pluralize(parseInt(r[1],10)+e,!0)):$(this).html(parseInt(n,10)+e)},$.fn.decr=function(e,t){return e==null&&(e=1),t==null&&(t=!1),$(this).incr(-e,t)},$.fn.reverse_state=function(){var e;return e=$(this).attr("data-state"),$(this).attr("data-state",{"true":"false","false":"true"}[e]),e.to_bool},$.fn.state=function(){var e;return e=$(this).attr("data-state"),e?e.to_bool:void 0},$.fn.inputWrapper=function(e){return this.text=e,this.each(function(e){return function(t,n){var r;return r=$("<span data-input-wrapper>"+e.text+"</span>"),$(n).after(r).css("text-indent",$(r).outerWidth()).css("padding",0),$(n).parent().attr("data-input-container","")}}(this))}}return e}(),new e})}.call(this),function(){define("common/add_on/string",["pluralize"],function(e){var t;return t=function(){function t(){Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(t,n){return t==null&&(t=42),n==null&&(n=!1),e(this,t,n)}}return t}(),new t})}.call(this),function(){define("common/add_on/main",["common/add_on/array","common/add_on/bootstrap","common/add_on/jquery","common/add_on/string"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){define("common/callback/base",[],function(){var e;return e=function(){function e(){var e;e=this,$("body").on("click","a[data-uid], [data-uid] a",function(t){var n,r,i,s;return $(this).is("[data-uid]")?(r=this,s=this,i=$(r).data("uid")):(r=this,s=$(r).parents("[data-uid]"),i=$(s).data("uid")),n="click_"+i,e.call_callback(e,n,"before",r,s),$.ajax($(r).attr("href")).success(function(t){return e.call_callback(e,n,"success",r,s,t)}).error(function(){return e.call_callback(e,n,"error",r,s)}).done(function(){return e.call_callback(e,n,"done",r,s)}),t.stopPropagation(),!1})}return e.prototype.call_callback=function(e,t,n,r,i,s){if(typeof e[""+n+"_"+t]=="function")return e[""+n+"_"+t](r,i,s)},e}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("common/callback/message",["jquery","common/callback/base"],function(e,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.before_click_star=function(t){return e("#favorite_count").incr(1,e(t).reverse_state())},r.prototype.before_click_pin=function(t){return e(t).reverse_state()},r.prototype.before_click_lock=function(t){return e(t).reverse_state()},r.prototype.before_click_upvote=function(t,n,r){var i;r==null&&(r=!0),r&&e(n).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,e(n).siblings("[data-uid=downvote]"),!1),i=e(n).reverse_state(),e(n).find("span.count").incr(1,i),e(n).siblings(".vote-summary").incr(1,i);if(e(n).parents(".reply-actions").length)return e(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_downvote=function(t,n,r){var i;r==null&&(r=!0),r&&e(n).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,e(n).siblings("[data-uid=upvote]"),!1),i=e(n).reverse_state(),e(n).find("span.count").incr(1,i),e(n).siblings(".vote-summary").incr(1,!i);if(e(n).parents(".reply-actions").length)return e(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_trollvote=function(t,n){return e(n).find("span.count").incr(1,e(n).reverse_state())},r.prototype.before_click_problem=function(t,n){return e(n).find("span.count").incr(1,e(n).reverse_state())},r.prototype.success_click_upvote=function(t,n,r){return e(n).find("span.count").html(r.upvote_count),e(n).siblings(".vote-summary").length&&e(n).siblings(".vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").length&&(e(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),e(n).siblings("[data-uid=downvote]").find("span.count").html(r.downvote_count)},r.prototype.success_click_downvote=function(t,n,r){return e(n).find("span.count").html(r.downvote_count),e(n).siblings(".vote-summary").length&&e(n).siblings(".vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").length&&(e(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),e(n).siblings("[data-uid=upvote]").find("span.count").html(r.upvote_count)},r.prototype.success_click_trollvote=function(t,n,r){return e(n).find("span.count").html(r.kind_count)},r.prototype.success_click_problem=function(t,n,r){return e(n).find("span.count").html(r.kind_count)},r.prototype.success_click_pin=function(t,n,r){if(r==="OK")return e(t).toggleClass("active")},r.prototype.success_click_lock=function(t,n,r){if(r==="OK")return e(t).toggleClass("active").toggleClass("icon-lock").toggleClass("icon-unlock")},r}(n),new r})}.call(this),function(){define("common/callback/main",["common/callback/message"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/modal/smart",["jquery","lodash","bootstrap"],function(t,n){var r;return r=function(){function r(t){var r;t==null&&(t={}),this._bind=e(this._bind,this),r={selector:"data-smart-modal",url:"data-url",container:"data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"},this.opts=n.extend(r,t),this._bind()}return r.prototype._bind=function(){var e;return e=function(e){return"["+e+"]"},t(e(this.opts.selector)).each(function(e){return function(n,r){var i,s,o,u;return u=t(r).attr(e.opts.url),i=t(r).attr(e.opts.container)||".container-item",o=t(r).attr(e.opts.titleSelector),s=t(r).attr(e.opts.footerSelector),u?t(r).click(function(){return log("Clicked "+r),t.get(u,function(n){var r,u,a;return log("Received data for modal"),u=t(n).find(i).html(),a=o?t(n).find(o).html():!1,r=s?t(n).find(s).html():!1,t(e.opts.modal).find(".modal-body").html(u),a?t(e.opts.modal).find(".modal-header").html(a).show():t(e.opts.modal).find(".modal-header").html("").hide(),r?t(e.opts.modal).find(".modal-footer").html(r).show():t(e.opts.modal).find(".modal-footer").html("").hide(),t(e.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",r)}}(this))},r}(),new r})}.call(this),function(){define("common/modal/main",["require","jquery","bootstrap","common/modal/smart"],function(e,t){var n;return n=function(){function n(){var n;n=this,t("input[data-modal-id]").on("click",function(r){var i,s,o,u;s=!0,o=t(this).data("condition"),o&&e(o)&&(u=e(t(this).data("condition")),u.modalCondition&&(s=u.modalCondition())),i=t(".modal[data-modal-id='"+t(this).data("modal-id")+"']"),n._initModal(i,t(this).data("confirmation"));if(s)return r.preventDefault(),i.modal("show")})}return n.prototype._initModal=function(t,n){if(n)return t.one("click",".btn-primary",function(t){return function(){var t;t=e(n);if(t.modalConfirmation)return t.modalConfirmation()}}(this))},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/simple_form/date_picker",["jquery","lodash","datetimepicker"],function(t,n){var r;return r=function(){function r(r){r==null&&(r={}),this._bindAll=e(this._bindAll,this),this.opts=n.merge(this.DEFAULTS,r),t.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),t(document).on("nested:fieldAdded",this._bindAll))}return r.prototype.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},r.prototype._bindAll=function(){return this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")},r.prototype._setDefaults=function(){return n.merge(t.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})},r.prototype._bindDateTimePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._bindDatePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._computeOptions=function(e,r){var i,s;return r==null&&(r={}),t(e).attr(this.opts.excludeDateAttr)&&(i=t.parseJSON(t(e).attr(this.opts.excludeDateAttr)),r.disabledDates=n.map(i,function(e){return moment(e)})),t(e).attr(this.opts.includeDateAttr)&&(s=t.parseJSON(t(e).attr(this.opts.includeDateAttr)),r.enabledDates=n.map(s,function(e){return moment(e)})),t(e).attr(this.opts.minDateAttr)&&(r.minDate=moment(t(e).attr(this.opts.minDateAttr))),t(e).attr(this.opts.maxDateAttr)&&(r.maxDate=moment(t(e).attr(this.opts.maxDateAttr))),t(e).attr(this.opts.noWeekends)!=null&&(r.daysOfWeekDisabled=[0,6]),r},r}(),new r})}.call(this),function(){define("common/simple_form/chosen",["jquery","chosen-jquery"],function(e){var t;return t=function(){function t(){e(document).on("nested:fieldAdded",this._bind),this._bind()}return t.prototype._bind=function(){return e(".chosen-select").each(function(){return e(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:e(this).width()+"px"})})},t}(),new t})}.call(this),function(){define("common/simple_form/limit",["jquery","maxlength"],function(e){var t;return t=function(){function t(){e("[data-limit]").each(function(){return e(this).maxlength({maxCharacters:e(this).data("limit"),zeroStatusText:e(this).data("zero"),oneStatusText:e(this).data("one"),moreStatusText:e(this).data("more")})})}return t}(),new t})}.call(this),function(){define("common/simple_form/textarea",["jquery"],function(e){var t;return t=function(){function t(){e("textarea").keydown(function(t){var n,r,i,s;if(t.keyCode===9)return i=this.selectionStart,r=this.selectionEnd,n=e(this),s=n.val(),n.val(s.substring(0,i)+"	"+s.substring(r)),this.selectionStart=this.selectionEnd=i+1,t.preventDefault()})}return t}(),new t})}.call(this),function(){define("common/simple_form/form_group",["jquery"],function(e){var t;return t=function(){function t(){e(".form-group.other").each(function(){var t,n;return n=e(this).find("select"),t=e(n).next("input"),e(n).find("option:selected").html()!==e(n).find("option:last").html()&&e(t).hide(),n.change(function(){return e(n).find("option:selected").html()===e(n).find("option:last").html()?t.show():t.hide()})})}return t}(),new t})}.call(this),function(){define("common/simple_form/main",["common/simple_form/date_picker","common/simple_form/chosen","common/simple_form/limit","common/simple_form/textarea","common/simple_form/form_group"],function(){var e;return e=function(){function e(){}return e}()})}.call(this),function(){define("common/bug_report",["Logger","jquery","bootstrap"],function(e,t){var n;return n=function(){function n(){var e,n;e=undefined,n=this,t("a#help").click(function(){return t("#bugModalContainer").modal("show"),e=t(this).attr("id"),t(this).attr("data-request")!=="ok"?t.ajax(t(this).data("url"),{jsonp:"callback",dataType:"jsonp",success:function(e){return function(e){return t("a#help").attr("data-request","ok"),t("#bugModalContainer .modal-body").html(e.form),n.update_attr(t("form#new_bug")),t("#bugModalContainer").on("click",".send",n.send_email)}}(this)}):t("#bugModalContainer").modal("show"),!1})}return n.prototype.update_attr=function(e){return t(e).find("input#bug_subject").val("[BUGS] "),t(e).find("input#bug_os").val(t.os.name),t(e).find("input#bug_browser").val(t.browser.name+(" (version "+t.browser.version+")")),t(e).find("input#bug_action").val(t("a#help").data("action")),t(e).find("input#bug_controller").val(t("a#help").data("controller")),t(e).find("input#bug_link").val(t(location).attr("href")),t(e).find("textarea#bug_content").val("Bonjour,\n\nJe suis "+t("[data-login]").data("login")+" et je suis actuellement sur la page "+t(location).attr("href")+".\nJe suis sous "+t.os.name+" avec "+t.browser.name+" (version "+t.browser.version+") \n\n\nVoici mon problème : \n")},n.prototype.send_email=function(){var n,r;return r=t("form#new_bug"),n="",t("#text_mail").length===0&&t("#bug .modal-footer").prepend("<span id='text_mail' style='margin-right: 20%; font-weight: bold;'>Envoi en cours!<img src='/assets/ajax-loader.gif' style='margin-left: 20px'/></span>"),t("#bug .modal-footer .send").hide(),r.find("input, textarea").each(function(){var e;return e=t(this).attr("name")+"="+encodeURIComponent(t(this).val()),n===""?n=e:n+="&"+e}),t.ajax(r.attr("action"),{jsonp:"callback",dataType:"jsonp",data:n,success:function(n){return e.log(n.success),t("#bugModalContainer #text_mail").fadeOut("slow",function(){return t("#bugModalContainer #text_mail").remove(),t("#bugModalContainer .modal-footer .send").show()}),n.status==="OK"?(noty({layout:"topRight",type:"success",text:"Your bug has been reported. Thanks !",timeout:4e3}),t("#bugModalContainer").modal("hide")):(e.log(n),noty({layout:"topRight",type:"error",text:n.error,timeout:4e3})),t("#bugModalContainer").modal("hide")}})},n}(),new n})}.call(this),function(){define("common/cache",["jquery"],function(e){var t;return t=function(){function t(){this._$element=e("[data-cache]"),this._$element.find("[data-cache-target]").each(function(){var t,n;return t=e(this),n=e(""+t.data("cache-target")),n.html(t.html())})}return t}(),new t})}.call(this),function(){define("common/copy",["jquery","zeroclipboard"],function(e,t){var n;return n=function(){function n(){t.config({swfPath:"/assets/clipboard-8d300934b0e6dbff620155650e9246a4.swf"}),e("[data-copy]").each(function(e){return function(t,n){return e._initCopy(n)}}(this))}return n.prototype._initCopy=function(n){var r;return r=new t(n),r.on("ready",function(){return r.on("copy",function(t){var r,i;return i=e(""+e(n).data("copy")).val(),r=e(n).data("copy-type")||"text/plain",t.clipboardData.setData(r,i),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/data_bindings",["jquery","lodash"],function(t,n){var r;return r=function(){function r(t){this._refreshSumTargetsFor=e(this._refreshSumTargetsFor,this);var r;r={bindSelector:"data-bind",sumSelector:"data-sum"},this.opts=n.extend(r,t),this._bindInitialEvents()}return r.prototype._bindInitialEvents=function(){var e;return e=this,t("["+e.opts.bindSelector+"]").bind("DOMSubtreeModified",function(n){var r;return n.stopImmediatePropagation(),r=t("["+e.opts.sumSelector+"='"+t(this).attr(e.opts.bindSelector)+"']"),t("["+e.opts.bindSelector+"='"+t(this).attr(e.opts.bindSelector)+"']").html(t(this).html()),e._refreshSumTargetsFor(t(this).attr(e.opts.bindSelector))})},r.prototype._refreshSumTargetsFor=function(e){var r,i,s,o,u,a;e=e.split(".")[0],u=t("["+this.opts.sumSelector+"^='"+e+"']");if(u.length>0)return a=u.attr(""+this.opts.sumSelector),i=a[a.length-1]==="*"?"^=":"=",r="["+this.opts.bindSelector+i+"'"+e+"']",s=t("["+this.opts.bindSelector+i+"'"+e+"']"),o=n.reduce(s,function(e,n){return e+parseInt(t(n).html())||0},0),u.html(o)},r.prototype._observeDOM=function(){var e,t;return e=window.MutationObserver||window.WebKitMutationObserver,t=window.addEventListener,function(n,r){var i;e?(i=new e(function(e,t){(e[0].addedNodes.length||e[0].removedNodes.length)&&r()}),i.observe(n,{childList:!0,subtree:!0})):t&&(n.addEventListener("DOMNodeInserted",r,!1),n.addEventListener("DOMNodeRemoved",r,!1))}},r}(),new r})}.call(this),function(){define("common/data_events",["jquery"],function(e){var t;return t=function(){function t(){this.attachFocusEvents(),this.attachToggleEvents()}return t.prototype.attachFocusEvents=function(){return e("[data-event-focus]").click(function(){return e(e(this).attr("data-event-focus")).focus()})},t.prototype.attachToggleEvents=function(){return e("[data-event-toggle]").each(function(){var t,n,r;return t=e(this).attr("data-event-container"),r=e(this).attr("data-event-toggle"),n=t?e(this).parents(t):e(this).parent(),e(n).find(r).addClass("hidden"),e(this).click(function(t){return t.stopImmediatePropagation(),e(n).find(r).toggleClass("hidden"),e(this).toggleClass("active"),!1})})},t}(),new t})}.call(this),function(){define("common/date",["jquery","moment-twitter"],function(e,t){var n;return n=function(){function n(){this._updateAll(),this.handler=setInterval(this._updateAll,61e3)}return n.prototype._updateAll=function(){return e("[data-long-date]").each(function(){return e(this).html(t(e(this).attr("data-long-date"),"YYYY-MM-DD HH:mm Z").fromNow())}),e("[data-short-date]").each(function(){return e(this).html(t(e(this).attr("data-short-date"),"YYYY-MM-DD HH:mm Z").twitter())}),e("[data-cal-date]").each(function(){return e(this).html(t(e(this).attr("data-cal-date"),"YYYY-MM-DD HH:mm Z").calendar())})},n.prototype.refresh=function(){return this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,61e3)},n}(),new n})}.call(this),function(){define("common/emojify",["emojify"],function(e){var t;return t=function(){function t(){e.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir:"/assets/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),this.refresh()}return t.prototype.refresh=function(){var t,n,r,i,s,o;s=["messages","changelogs"],o=[];for(r=0,i=s.length;r<i;r++)n=s[r],t=document.getElementsByClassName(""+n+"-list")[0],e&&t!=null?o.push(e.run(t)):o.push(void 0);return o},t}(),new t})}.call(this),function(){define("common/fullscreen",["jquery"],function(e){var t;return t=function(){function t(){e("[data-toggle-fullscreen]").click(function(){var t;t=e(".page-content")[0];if(t){if(t.requestFullscreen)return t.requestFullscreen();if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen()}}),document.addEventListener("webkitfullscreenchange",function(){return e("html").toggleClass("fullscreen")},!1)}return t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/infinite_scroll",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._bindManualButtons=e(this._bindManualButtons,this),this._clearManualButtons=e(this._clearManualButtons,this),this._generateManualButtons=e(this._generateManualButtons,this),this.paginate=e(this.paginate,this);var i;i={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",itemContainer:".messages-list",loading:function(e){return"Loading "+(e?"previous":"next")+" messages..."},limit:250},r||(r={}),this.options=n.extend(i,r),this._refreshValues(),this.nav=t(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),t(document).scroll(this.paginate),r.onRefresh&&(this.onRefresh=r.onRefresh)}return r.prototype._setupReferences=function(){var e,n;return e=t(""+this.options.itemContainer+" "+this.options.itemSelector).first(),n=t(""+this.options.itemContainer+" "+this.options.itemSelector).last(),this.start=e?e.attr("data-index"):0,this.end=n?n.attr("data-index"):0},r.prototype.paginate=function(e){var n;n=this._isScrollUp();if(n&&t(document).scrollTop()===0&&this.scroll>350)return e.preventDefault(),e.stopImmediatePropagation(),t("body").scrollTop(this.scroll),!1;this._refreshValues();if(this._needMoreContent(n))return this._getNextItems(n)},r.prototype._needMoreContent=function(e){var t;return e?this.scroll<this.options.limit:(t=this.docHeight-(this.winHeight+this.scroll),t<this.options.limit)},r.prototype.onRefresh=function(e){return this.callbacks.push(e)},r.prototype._addLoader=function(e){var n;return n='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n  '+this.options.loading(e)+"\n</h1>",e?t(""+this.options.itemContainer).prepend(n):t(""+this.options.itemContainer).append(n),e?t("[data-load-previous]").remove():t("[data-load-next]").remove()},r.prototype._removeLoader=function(){return t(""+this.options.itemContainer+" .infinite-loader").remove()},r.prototype._generateManualButtons=function(){return t(this.options.prevSelector).length>0&&t(this.options.itemContainer).prepend(t('<div class="btn btn-block btn-primary" data-load-previous>Load previous messages</div>')),t(this.options.nextSelector).length>0&&t(this.options.itemContainer).append(t('<div class="btn btn-block btn-primary" data-load-next>Load next messages</div>')),this},r.prototype._clearManualButtons=function(){return t("[data-load-previous], [data-load-next]").remove()},r.prototype._bindManualButtons=function(){return t(document).on("click","[data-load-previous]",function(e){return function(){return e._getNextItems(!0)}}(this)),t(document).on("click","[data-load-next]",function(e){return function(){return e._getNextItems(!1)}}(this))},r.prototype._getNextItems=function(e){var r,i,s;return e==null&&(e=!1),s=e?this.options.prevSelector:this.options.nextSelector,t(s).length>0?(r=t(s).first(),i=t(r).attr("href"),!this.lock&&i&&(r.remove(),this._addLoader(e),this.lock=!0,t.get(i,function(r){return function(i){var o,u,a,f,l;return f=t(i).find(r.options.navSelector),a=t(i).find(s).parent(),r.nav.append(a),r.nav=t(r.options.navSelector),u=t(i).find(r.options.itemSelector),e?(o=t(""+r.options.itemContainer+" "+r.options.itemSelector).first(),l=-document.querySelector("[data-id='"+o.attr("data-id")+"']").getBoundingClientRect().top,o.before(u),o.prevAll().each(function(){return l+=t(this).outerHeight()}),t("body").scrollTop(l)):t(""+r.options.itemContainer+" "+r.options.itemSelector).last().after(u),r.lock=!1,r._removeLoader(),r._generateManualButtons(),n.each(r.callbacks,function(e){return e()})}}(this))),!0):!1},r.prototype._isScrollUp=function(){return this.scroll>t(document).scrollTop()},r.prototype._refreshValues=function(){return this.docHeight=t(document).innerHeight(),this.winHeight=t(window).innerHeight(),this.scroll=t(document).scrollTop()},r}()})}.call(this),function(){define("common/lockable",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this._form_to_data,e("[data-lockable-url]").length&&setInterval(function(t){return function(){return t._synchronize_locked(e("[data-lockable-url]").data("lockable-url"))}}(this),1e4),e("[data-check-lock-url]").length&&(setInterval(function(t){return function(){return t._check_locked(e("[data-check-lock-url]").data("check-lock-url"))}}(this),1e4),e("#lock_taken .roger").click(function(n){return function(){return e("form").submit(function(){return e.ajax({url:e(this).attr("action"),data:t(e("form")),type:"POST",dataType:"JSON"}).success(function(t){return document.location.href=e("#lock_taken .roger").attr("href")}),!1}),e("form").submit()}}(this)))}return t.prototype._synchronize_locked=function(t){return e.getScript(t)},t.prototype._check_locked=function(t){return e.getJSON(t,function(t){var n;if(t.res!=="OK")return e("#lock_taken .modal-body").html((n=t["res"])!=null?n:""),e("#lock_taken").modal("show")})},t.prototype._form_to_data=function(t){return e.map(e(t).find("input, select, textarea"),function(t){return e(t).attr("name")+"="+e(t).val()}).join("&")},t}(),new t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/manage_attachment",["jquery"],function(t){var n;return n=function(){function n(){this.changed=e(this.changed,this),t.getJSON(t("[data-attachments-url]").data("attachments-url"),function(e){return function(t){return e.values=t}}(this)),t("form").on("change","#attachment_select",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e){var n,r,i,s,o,u,a,f;o=t(e).find("option:checked").html().toLowerCase(),n=t(e).parents(".form-group").siblings(".attachment_fields"),u=(new Date).getTime(),r=t(e).attr("name"),i="<div class='form-group input optional project_attachements'>",f=this.values[o];for(s in f)a=f[s],i+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+o+"' name='"+r.replace("[kind]","[attachable_attributes]["+u+"][attachable_type]]")+"' /></div>",i+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+u+"_"+s+"'>"+s+"</label>",i+="<div class='col-sm-10'>",a==="string"?i+="<input class='input optional form-control' id='project_attachements_attributes_"+u+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+u+"]["+s+"]")+"' />":a==="text"?i+="<textarea class='text optional form-control' id='project_attachements_attributes_"+u+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+u+"]["+s+"]")+"' />":a==="upload"&&(i+="<input class='file optional form-control' type='file'id='project_attachements_attributes_"+u+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+u+"]["+s+"]")+"' />"),i+="</div>";return i+="</div>",t(n).html(i)},n}(),new n})}.call(this),function(){define("common/markdownable",["jquery","marked","Logger"],function(e,t,n){var r;return r=function(){function r(e){var r;t==null?n.warn("Unable to find marked for client-side markdown compilation."):(r={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"},this.opts=_.extend(r,e),this._generateMarkdown())}return r.prototype._generateMarkdown=function(){var n;return n=this,e(this.opts.markdownSelector).each(function(){return e(this).html(t(e(this).attr(n.opts.markdownAttribute).trim()))})},r}(),new r})}.call(this),function(){define("common/mobilize",["lodash","fastclick"],function(e,t){var n;return n=function(){function n(n){var r;r={fastclick:!0,overscroll:!0,overscrollTarget:".page"},this.opts=e.extend(r,n),this.opts.fastclick&&t.attach(document.body),this.opts.overscroll&&this._overscroll(this.opts.overscrollTarget)}return n.prototype._overscroll=function(e){var t;return t=function(e){e.addEventListener("touchstart",function(){var t,n,r;n=e.scrollTop,r=e.scrollHeight,t=n+e.offsetHeight,n===0?e.scrollTop=1:t===r&&(e.scrollTop=n-1)}),e.addEventListener("touchmove",function(t){e.offsetHeight<e.scrollHeight&&(t._isScroller=!0)})},document.querySelector(e)&&t(document.querySelector(e)),document.body.addEventListener("touchmove",function(e){e._isScroller||e.preventDefault()})},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/multiple_actions",["jquery"],function(t){var n;return n=function(){function n(){this.on_select_one_click=e(this.on_select_one_click,this),this.on_select_all_click=e(this.on_select_all_click,this),this.on_select_click=e(this.on_select_click,this),this.selector=".table.admin_table",t(this.selector).length&&(this.bindAll(),t(this.selector).find(".btns").hide(),this.on_select_click())}return n.prototype.bindAll=function(){var e;return e=this,t(this.selector).on("click",".select.all",this.on_select_all_click),t(this.selector).on("click",".select.one",this.on_select_one_click),t(this.selector).on("click",".select",this.on_select_click)},n.prototype.on_select_click=function(e){if(!e)return;return t(e.target).parents(this.selector).find(".btns")[t(e.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),t(e.target).parents(this.selector).find(".btns a").each(function(n){return function(r,i){var s;return s=t(e.target).parents(n.selector).find(".select.one").filter(":checked").map(function(){return t(this).data("id")}).toArray(),s=s.to_rails_params(t(e.target).parents(n.selector).data("model")),t(i).attr("href",""+t(i).attr("href").split("?")[0]+"?"+s)}}(this))},n.prototype.on_select_all_click=function(e){return t(e.target).parents(this.selector).find(".select.one").prop("checked",!t(e.target).parents(this.selector).find(".select.one").filter(":checked").length),t(e.target).prop("checked",t(e.target).parents(this.selector).find(".select.one").filter(":checked").length)},n.prototype.on_select_one_click=function(e){return t(e.target).parents(this.selector).find(".select.all").prop("checked",!t(e.target).parents(this.selector).find(".select.one").not(":checked").length)},n}(),new n})}.call(this),function(){define("common/notifications_manager",["jquery","tinycon"],function(e,t){var n;return n=function(){function n(t){if(!window.webkitNotifications||window.webkitNotifications.checkPermission()===0||e("body[data-id]").length!==0)return;this._setDefaultOptions(),t=e.extend(this.default_notif_options,t),e("#browser_notification").on("click",function(){return e(this).parents(".alert").remove(),window.webkitNotifications.requestPermission()}),this.alert("Configure browser notifications : <a href='#' id='browser_notification'>Let's Go!</a>",t.alert)}return n.prototype._setDefaultOptions=function(){var n;return n=e("title").html(),this.default_alert_options={parent:".span9","class":"success",fct:"prepend",template:"<div class='alert fade in alert-$class'><button class='close' data-dismiss='alert'>x</button>$msg</div>"},this.default_notif_options={image:e("link[rel='shortcut icon']").attr("href"),onclick:function(){return window.focus()},title:n,timeout:5e3,alert:{"class":"info"}},this.default_blink_title_options={title:n},this.blink_titles=[n],this.blink_interval=null,this.blink_index=1,t.setOptions({width:7,height:9,font:"10px arial",colour:"#FFFFFF",background:"#FF0000",fallback:!0})},n.prototype.alert=function(t,n){return n=e.extend(this.default_alert_options,n),e(n.parent)[n.fct](e(n.template.replace("$class",n["class"]).replace("$msg",t)))},n.prototype.blink_title=function(t,n){if(!e("body").hasClass("hidden"))return;return n=e.extend(this.default_blink_title_options,n),this.blink_titles.push(t),this.blink_fct=function(t){return function(){return e("title").html(t.blink_titles[t.blink_index]),t.blink_index=(t.blink_index+1)%t.blink_titles.length}}(this),this.blink_interval||(this.blink_interval=setInterval(this.blink_fct,700)),e(window).one("focus",function(t){return function(){return clearInterval(t.blink_interval),t.blink_interval=null,e("title").text(n.title),t.blink_titles=[t.default_blink_title_options.title],t.blink_index=1}}(this))},n.prototype.set_focus_favicon=function(){return e(window).one("focus",function(e){return function(){return t.reset(),e.value=void 0}}(this))},n.prototype.incr_favicon=function(e){return this.value==null&&(this.value=0),this.value+=1,t.setBubble(this.value),this.set_focus_favicon()},n.prototype.update_favicon=function(e,n){return this.value=e,e!=null?t.setBubble(e):(t.reset(),this.set_focus_favicon())},n.prototype.display_notif=function(t,n){var r;n=e.extend(this.default_notif_options,n);if(window.webkitNotifications&&window.webkitNotifications.checkPermission()===0)return r=window.webkitNotifications.createNotification(n.image,n.title,t),r.onclick=n.onclick,r.show(),setTimeout(function(){return r.cancel()},n.timeout)},n}(),new n})}.call(this),function(){define("common/overlay",["jquery","lodash"],function(e,t){var n;return n=function(){function n(n){var r;r={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"},this.opts=t.extend(r,n),e("["+this.opts.trigger+"]").click(function(t){return function(){if(e("["+t.opts.widthSelector+"]").length===0||e(window).width()<=parseInt(e("["+t.opts.widthSelector+"]").attr(t.opts.widthSelector)))return e("["+t.opts.selector+"]").toggleClass(""+t.opts.openClass)}}(this)),e("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(t){return function(){return e("["+t.opts.selector+"]").removeClass(""+t.opts.openClass)}}(this))}return n}(),new n})}.call(this),function(){define("common/remote_pagination",["jquery"],function(e){var t;return t=function(){function t(){e("a[data-remote]").parents("[data-scroll]").length>0&&e(window).scroll(function(){var t;t=e("nav.pagination a[rel=next]").attr("href");if(t&&e(window).scrollTop()>e(document).height()-e(window).height()-50)return e(".pagination").html("<li><span>Loading...</span></li>"),e.getScript(t+"?scroll=true")}),this.loading_animation(),e(document).ajaxComplete(this.loading_animation)}return t.prototype.loading_animation=function(){if(!e("nav.pagination a[data-remote]").length)return;e("a[data-remote]").length>0&&e("a[data-remote]").parents("[data-scroll]").length===0&&e("nav.pagination").on("click","a[data-remote=true]",function(t){history.pushState("","New URL: "+e(this).attr("href"),e(this).attr("href")),e("nav.pagination ul").empty().html("<li><span>Loading...</span></li>");if(e(window).scrollTop()>e("#main-container").offset().top-50)return e("html, body").animate({scrollTop:e("#main-container").offset().top-50},"fast")});if(e("a[data-remote]").parents("[data-scroll]").length>0)return e("nav.pagination").hide()},t}(),new t})}.call(this),function(){define("common/responsive_menu",["jquery"],function(e){var t;return t=function(){function t(e){this.enabled=e!=null?e:!0,this._registerEvents(),this}return t.prototype._registerEvents=function(){return this.enabled?e("[data-trigger-menu]").on("click",function(){return e(".left-main-container").toggleClass("opened")}):e("[data-trigger-menu]").hide()},t}(),new t})}.call(this),function(){define("common/scroll_spy",["jquery","scrollspy"],function(e){var t;return t=function(){function t(){e("body").scrollspy({target:"#navbar-scale",offset:30})}return t}()})}.call(this),function(){define("common/spinner",["jquery","odometer"],function(e,t){var n;return n=function(){function n(){e("[data-spinner-value]").each(function(){var n,r,i;return i=parseInt(e(this).attr("data-spinner-value")),n=this,r=new t({el:n,value:0}),setTimeout(function(){return r.update(i)},1e3)})}return n}()})}.call(this),function(){define("common/tags",["jquery","lodash"],function(e,t){var n;return n=function(){function n(){e("[data-filter-tags]").keyup(function(){var n;n=t.snakeCase(e(this).val().toLowerCase()),e(".sidebar-tag-item").show();if(n.length>0)return e(".sidebar-tag-item:not([data-tag-name*='"+n+"'])").hide()})}return n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/user_link",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._onLeave=e(this._onLeave,this),this._getTriggerPosition=e(this._getTriggerPosition,this),this._onHover=e(this._onHover,this);var i;i={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:t(".main-left-navbar a").first().attr("href")},this.opts=n.extend(i,r),this._bindUserLinks()}return r.prototype._bindUserLinks=function(){var e;return e=this,t(this.opts.linkSelector).hover(this._onHover,this._onLeave)},r.prototype._onHover=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("body").append(this._getPopupTemplate(r)),this._showBubbleFor(r,n)},r.prototype._getTriggerPosition=function(e,n){return{left:t(e).offset().left+t(e).innerWidth()/2-t(n).innerWidth()/2,top:t(e).offset().top-t(n).innerHeight()}},r.prototype._onLeave=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("[data-user-popup='"+r+"']").remove()},r.prototype._showBubbleFor=function(e,n){return t.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",url:""+this.opts.profileBaseUrl+"/users/"+e+".json",done:function(r){return function(i){var s;return t("[data-user-popup='"+e+"']").html(r._getPopupContent(i.user)),s=t("[data-user-popup='"+e+"']"),s.css(r._getTriggerPosition(n,s))}}(this)})},r.prototype._getPopupTemplate=function(e){return'<div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+e+'" style="position: absolute">\n  <h3 class="marked-title">Loading...</h3>\n</div>'},r.prototype._getPopupContent=function(e){return'<div class="user-popup-image" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+e.login+'.jpg)">\n</div>\n<div class="user-popup-info">\n  <h3 class="user-popup-login">'+e.full_name+'</h3>\n  <span class="user-popup-email marked-title">\n    <span class="icon-envelope"></span>\n    '+e.email+'\n  </span>\n  <h5 class="user-popup-location">\n    <span data-user-location="'+e.location+'" class="icon-circle"></span>\n    '+(e.location||"unavailable")+"\n  </h5>\n</div>"},r}(),new r})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("common/window_focus",[],function(){var t;return t=function(){function t(){var t,n,r,i,s;t="hidden",n=function(n){var r,i,s,o;n=n||window.event,s="visible",i="hidden",r={focus:s,focusin:s,pageshow:s,blur:i,focusout:i,pagehide:i},(o=n.type,e.call(r,o)>=0)?document.body.className=r[n.type]:document.body.className=this[t]?i:s},e.call(document,t)>=0?document.addEventListener("visibilitychange",n):(r=t="mozHidden",e.call(document,r)>=0)?document.addEventListener("mozvisibilitychange",n):(i=t="webkitHidden",e.call(document,i)>=0)?document.addEventListener("webkitvisibilitychange",n):(s=t="msHidden",e.call(document,s)>=0)?document.addEventListener("msvisibilitychange",n):e.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n}return t}(),new t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/main",["require","jquery","Logger","common/add_on","common/callback","common/modal","common/simple_form","common/modal","common/bug_report","common/cache","common/copy","common/data_bindings","common/data_events","common/date","common/emojify","common/fullscreen","common/infinite_scroll","common/lockable","common/manage_attachment","common/markdownable","common/mobilize","common/multiple_actions","common/notifications_manager","common/overlay","common/remote_pagination","common/responsive_menu","common/scroll_spy","common/spinner","common/tags","common/user_link","common/window_focus"],function(t,n,r){var i;return i=function(){function i(){this._emitReady=e(this._emitReady,this),this._ready=e(this._ready,this),n(this._ready)}return i.prototype._ready=function(){var e,n,r;return n=t("common/scroll_spy"),new n,r=t("common/simple_form"),new r,e=t("common/fullscreen"),new e,this._emitReady()},i.prototype._emitReady=function(){return r.log("Emit Ready"),n(document).trigger("intra.ready"),this.ready()},i}()})}.call(this),define("common",["common/main"],function(e){return e});